(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a(50)},26:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(18),c=a.n(l),o=(a(26),a(2)),r=a(3),s=a(5),m=a(4),d=a(6),u=a(7),v=a.n(u),h=a(8),p=a(10),E=a.n(p),f=function(){function e(t,a,n,i,l,c,r){Object(o.a)(this,e),this.id=t,this.title=a,this.year=n,this.runtime=i,this.genre=l,this.director=c,this.poster=r}return Object(r.a)(e,[{key:"niceTitle",value:function(){var e=this.title.replace(/[^A-Za-z0-9 .]/g,""),t=e.toLowerCase().trim(),a=this.toTitleCase(t);return console.log({title:this.title,clean:e,low:t,nice:a}),a}},{key:"toTitleCase",value:function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}}]),e}(),b="http://www.omdbapi.com/",N=function(){function e(){Object(o.a)(this,e)}return Object(r.a)(e,null,[{key:"getMovies",value:function(){var t=Object(h.a)(v.a.mark(function t(){var a,n,i,l,c;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return"dad",a="".concat(b,"?apiKey=").concat("2c7f5f8c","&s=").concat("dad"),t.next=4,E()(a);case 4:return n=t.sent,i=n.data.Search.map(function(t){return e.getMovieDetails(t.imdbID)}),t.next=8,Promise.all(i);case 8:return l=t.sent,c={count:n.data.totalResults,movies:l},t.abrupt("return",c);case 11:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()},{key:"getMovieDetails",value:function(){var e=Object(h.a)(v.a.mark(function e(t){var a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(b,"?apiKey=").concat("2c7f5f8c","&i=").concat(t),e.next=3,E()(a);case 3:return n=e.sent,e.abrupt("return",new f(n.data.imdbID,n.data.Title,n.data.Year,n.data.Runtime,n.data.Genre,n.data.Director,n.data.Poster));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),g=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).handleDelete=function(){var e=a.props.movie;a.props.handleDelete(e.id)},a.handleEdit=function(){var e=a.props.movie;a.props.handleEdit(e.id)},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.movie;return i.a.createElement("div",{className:"column is-one-quarter"},i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"card-image"},i.a.createElement("div",{className:"image is-4by3"},i.a.createElement("img",{src:e.poster||"https://www.nationalpetregister.org/assets/img/no-photo.jpg",alt:"movie"}))),i.a.createElement("div",{className:"card-content"},i.a.createElement("div",{className:"media-content"},i.a.createElement("div",{className:"title is-4"},e.niceTitle()),i.a.createElement("div",{className:"subtitle is-6"},e.director),i.a.createElement("div",{className:"subtitle is-6"},e.year))),i.a.createElement("div",{className:"card-footer"},i.a.createElement("span",{className:"icon",onClick:this.handleEdit},i.a.createElement("i",{className:"fas fa-edit"})),i.a.createElement("span",{className:"icon",onClick:this.handleDelete},i.a.createElement("i",{className:"fas fa-trash"})))))}}]),t}(i.a.Component),y=a(11),C=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={movie:{}},a.handleFieldChange=function(e){return function(t){var n=Object(y.a)({},a.state.movie);n[e]=t.target.value,a.setState({movie:n}),a.props.onMovieChange(n)}},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.setState({movie:Object(y.a)({},this.props.movie)})}},{key:"render",value:function(){var e=this.state.movie;return i.a.createElement("div",null,i.a.createElement("h2",{className:"title"},"Edit movie details"),i.a.createElement("div",{className:"field"},i.a.createElement("label",{htmlFor:"",className:"label"},"Title"),i.a.createElement("div",{className:"control"},i.a.createElement("div",null),i.a.createElement("input",{className:"input",type:"text",placeholder:"Title",value:e.title,onChange:this.handleFieldChange("title")}))),i.a.createElement("div",{className:"field"},i.a.createElement("label",{htmlFor:"",className:"label"},"Director"),i.a.createElement("div",{className:"control"},i.a.createElement("input",{className:"input",type:"text",placeholder:"Director",value:e.director,onChange:this.handleFieldChange("director")}))),i.a.createElement("div",{className:"field"},i.a.createElement("label",{htmlFor:"",className:"label"},"Year"),i.a.createElement("div",{className:"control"},i.a.createElement("input",{className:"input",type:"text",placeholder:"Year",value:e.year,onChange:this.handleFieldChange("year")}))),i.a.createElement("div",{className:"field"},i.a.createElement("label",{htmlFor:"",className:"label"},"Genre"),i.a.createElement("div",{className:"control"},i.a.createElement("input",{className:"input",type:"text",placeholder:"Genre",value:e.genre,onChange:this.handleFieldChange("genre")}))),i.a.createElement("div",{className:"field"},i.a.createElement("label",{htmlFor:"",className:"label"},"Runtime"),i.a.createElement("div",{className:"control"},i.a.createElement("input",{className:"input",type:"text",placeholder:"Runtime",value:e.runtime,onChange:this.handleFieldChange("runtime")}))))}}]),t}(i.a.Component),w=a(19),j=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={movies:[],count:0,movieToDelete:null,movieToEdit:null,editedMovie:null},a.handleEdit=function(e){var t=a.getMovieById(e);a.setState({movieToEdit:t})},a.handleDelete=function(e){var t=a.getMovieById(e);a.setState({movieToDelete:t})},a.resetMovieToDelete=function(){a.setState({movieToDelete:null})},a.resetMovieToEdit=function(){a.setState({movieToEdit:null})},a.deleteSelectedMovie=function(){a.setState({movies:a.state.movies.filter(function(e){return e.id!==a.state.movieToDelete.id}),movieToDelete:null})},a.handleMovieChange=function(e){a.setState({editedMovie:e})},a.saveMovie=function(){var e=a.state.editedMovie.id,t=a.state.editedMovie,n=t.title,i=t.director,l=t.runtime,c=t.genre,o=t.year,r=a.getMovieById(e);r.title=n,r.director=i,r.runtime=l,r.year=o,r.genre=c,a.setState({movieToEdit:null})},a.handleAdd=function(){var e=new f(Object(w.a)(),"","","","","",""),t=a.state.movies;t.push(e),a.setState({movieToEdit:e,movies:t})},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=Object(h.a)(v.a.mark(function e(){var t,a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.getMovies();case 2:t=e.sent,a=t.movies,n=t.count,this.setState({movies:a,count:n});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getMovieById",value:function(e){return this.state.movies.find(function(t){return t.id===e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.movieToDelete,n=t.movieToEdit;return i.a.createElement("div",{className:"container"},i.a.createElement("h1",{className:"title"},"Herolo Movies"),i.a.createElement("div",null,i.a.createElement("button",{className:"button is-info",onClick:this.handleAdd},"Add")),"We found ".concat(this.state.count," movies"),i.a.createElement("div",{className:"columns is-multiline"},this.state.movies.map(function(t){return i.a.createElement(g,{key:t.id,movie:t,handleDelete:e.handleDelete,handleEdit:e.handleEdit})})),a&&i.a.createElement("div",{className:"modal is-active"},i.a.createElement("div",{className:"modal-background"}),i.a.createElement("div",{className:"modal-card"},i.a.createElement("section",{className:"modal-card-body"},"Are you sure you want to delete ".concat(a.title," ?")),i.a.createElement("footer",{className:"modal-card-foot"},i.a.createElement("button",{className:"button is-danger",onClick:this.deleteSelectedMovie},"Delete!"),i.a.createElement("button",{className:"button",onClick:this.resetMovieToDelete},"Cancel"))),i.a.createElement("button",{className:"modal-close is-large","aria-label":"close",onClick:this.resetMovieToDelete})),n&&i.a.createElement("div",{className:"modal is-active"},i.a.createElement("div",{className:"modal-background"}),i.a.createElement("div",{className:"modal-card"},i.a.createElement("section",{className:"modal-card-body"},i.a.createElement(C,{movie:n,onMovieChange:this.handleMovieChange})),i.a.createElement("footer",{className:"modal-card-foot"},i.a.createElement("button",{className:"button is-success",onClick:this.saveMovie},"Save changes"),i.a.createElement("button",{className:"button",onClick:this.resetMovieToEdit},"Cancel"))),i.a.createElement("button",{className:"modal-close is-large","aria-label":"close",onClick:this.resetMovieToEdit})))}}]),t}(i.a.Component),k=(a(49),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("section",{className:"section"},i.a.createElement("div",{className:"container"},i.a.createElement(j,null))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[20,1,2]]]);
//# sourceMappingURL=main.aa980107.chunk.js.map